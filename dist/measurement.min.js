!function(){"use strict";var e;!function(e){e.Mass="Mass",e.Length="Length",e.Volume="Volume",e.Time="Time",e.Memory="Memory",e.Angle="Angle",e.Temperature="Temperature",e.Charge="Charge",e.Energy="Energy",e.Force="Force",e.Pressure="Pressure",e.Compound="Compound",e.Unknown="Unknown"}(e||(e={}));var t=e;class i{constructor(e){this.abbr=e.abbr,this.name=e.name}static get(e){return e instanceof i?e:new i(e)}toString(e=!1){return e||!this.name?this.abbr:this.name}}function n(...e){return Math.max(...e.map((e=>`${e}`)).filter((e=>e.includes("."))).map((e=>e.split(".")[1].length)))}function a(e){let t=1;return e>0&&(t=Math.pow(10,e)),t}function r(...e){let t=a(n(...e));return(e=e.map((e=>Math.round(e*t)))).slice(1).reduce(((e,t)=>e*t),e[0])/Math.pow(t,e.length)}function s(...e){return e.slice(1).reduce(((e,t)=>{let i=a(n(e,t));return(e=Math.round(e*i))/(t=Math.round(t*i))}),e[0])}class l{constructor(t){var n,a;this.base=i.get(t.base||(null===(n=t.baseUnit)||void 0===n?void 0:n.base)),this.baseUnit=t.baseUnit,this.unitType=t.unitType||(null===(a=t.baseUnit)||void 0===a?void 0:a.unitType)||e.Unknown,t.prefix&&(this.prefix=i.get(t.prefix)),this.baseMultiplier=isNaN(t.multiplier)?1:parseFloat(`${t.multiplier}`),this.__name=t.name}get abbr(){return this.toString()}get name(){return this.__name||this.toString(!1)}get multiplier(){var e,t;const i=null!==(t=null===(e=this.baseUnit)||void 0===e?void 0:e.multiplier)&&void 0!==t?t:1;return r(this.baseMultiplier,i)}toString(e=!0){var t,i,n,a;return e?(null!==(i=null===(t=null==this?void 0:this.prefix)||void 0===t?void 0:t.abbr)&&void 0!==i?i:"")+this.base.abbr:(null!==(a=null===(n=null==this?void 0:this.prefix)||void 0===n?void 0:n.name)&&void 0!==a?a:"")+this.base.name}matchesType(e){return this.unitType===e.unitType}clone(e){let t={base:this.base,baseUnit:this.baseUnit,prefix:this.prefix,unitType:this.unitType,multiplier:this.baseMultiplier,name:this.__name};return(null==e?void 0:e.base)&&(t.base=e.base),(null==e?void 0:e.baseUnit)&&(t.baseUnit=e.baseUnit),(null==e?void 0:e.prefix)&&(t.prefix=e.prefix),(null==e?void 0:e.unitType)&&(t.unitType=e.unitType),(null==e?void 0:e.multiplier)&&(t.multiplier=e.multiplier),(null==e?void 0:e.name)&&(t.name=e.name),new l(t)}}function u(t){if(t.unitType!==e.Compound)return`${t.unitType}`;const i=t.subUnits.map((e=>u(e))).join(".");return`${t.unitType}:${i}`}class b{constructor(e){this.subUnits=[],this.isInverse=!1,this.subUnits=e.units||[],this.__name=e.name,this.__abbr=e.abbr}get unitType(){return t.Compound}get multiplier(){return function(e,t=!1){let i=1;if(e.length){let n=e.map((e=>e.multiplier));i=t?r(...n):s(...n)}return i}(this.subUnits)}addUnit(e,t=!1){return t?this.subUnits.unshift(e):this.subUnits.push(e),this}convert(e,t=0){if(this.matchesType(e))return e;let i=this.subUnits.slice(0);if(!e.matchesType(i[t]))throw new Error("Invalid Units: a unit of type `"+u(i[t])+"` cannot be converted to a unit of type `"+u(e)+"`");return i[t]=e,new b({units:i})}matchesType(e){if(e.unitType!==t.Compound)return!1;return e.subUnits.every(((e,t)=>this.subUnits[t]&&this.subUnits[t].matchesType(e)))}get abbr(){var e;return null!==(e=this.__abbr)&&void 0!==e?e:this.toString()}get name(){return this.__name||this.toString(!1)}clone(e){let t={units:this.subUnits,name:this.__name};return(null==e?void 0:e.units)&&(t.units=e.units),(null==e?void 0:e.name)&&(t.name=e.name),new b(t)}toString(e=!0){return e&&this.__abbr?this.__abbr:this.subUnits.map((t=>t.toString(e))).join(e?"/":" per ")}}const m=new Set,o={},p=new l({base:new i({abbr:"s",name:"second"}),unitType:e.Time});m.add(p);const h=new l({base:new i({abbr:"min",name:"minute"}),baseUnit:p,multiplier:60});m.add(h);const c=new l({base:new i({abbr:"h",name:"hour"}),baseUnit:h,multiplier:60});m.add(c);const d=new l({base:new i({abbr:"d",name:"day"}),baseUnit:c,multiplier:24});m.add(d);const w=new l({base:new i({abbr:"W",name:"week"}),baseUnit:d,multiplier:7});m.add(d);const f=new l({base:new i({abbr:"yr",name:"year"}),baseUnit:d,multiplier:365.25});m.add(f);const g=new l({base:new i({abbr:"m",name:"meter"}),unitType:e.Length});m.add(g);const v=new l({base:new i({abbr:"g",name:"gram"}),unitType:e.Mass});m.add(v);const y=new l({base:new i({abbr:"l",name:"litre"}),unitType:e.Volume});m.add(y);const U=new l({base:new i({abbr:"b",name:"bit"}),unitType:e.Length});m.add(U);const x=new l({base:new i({abbr:"B",name:"byte"}),baseUnit:U,multiplier:8});m.add(x);const M=[p,g,v,y,U,x],T=[{prefix:{abbr:"Y",name:"yotta"},multiplier:Math.pow(10,24)},{prefix:{abbr:"Z",name:"zetta"},multiplier:Math.pow(10,21)},{prefix:{abbr:"E",name:"exa"},multiplier:Math.pow(10,18)},{prefix:{abbr:"P",name:"peta"},multiplier:Math.pow(10,15)},{prefix:{abbr:"T",name:"tera"},multiplier:Math.pow(10,12)},{prefix:{abbr:"G",name:"giga"},multiplier:Math.pow(10,9)},{prefix:{abbr:"M",name:"mega"},multiplier:Math.pow(10,6)},{prefix:{abbr:"k",name:"kilo"},multiplier:Math.pow(10,3)},{prefix:{abbr:"h",name:"hecto"},multiplier:Math.pow(10,2)},{prefix:{abbr:"da",name:"deca"},multiplier:Math.pow(10,1)},{prefix:{abbr:"d",name:"deci"},multiplier:Math.pow(10,-1)},{prefix:{abbr:"c",name:"centi"},multiplier:Math.pow(10,-2)},{prefix:{abbr:"m",name:"milli"},multiplier:Math.pow(10,-3)},{prefix:{abbr:"u",name:"micro"},multiplier:Math.pow(10,-6)},{prefix:{abbr:"Î¼",name:"micro"},multiplier:Math.pow(10,-6)},{prefix:{abbr:"n",name:"nano"},multiplier:Math.pow(10,-9)},{prefix:{abbr:"p",name:"pico"},multiplier:Math.pow(10,-12)},{prefix:{abbr:"f",name:"femto"},multiplier:Math.pow(10,-15)},{prefix:{abbr:"a",name:"atto"},multiplier:Math.pow(10,-18)},{prefix:{abbr:"z",name:"zepto"},multiplier:Math.pow(10,-21)},{prefix:{abbr:"y",name:"yocto"},multiplier:Math.pow(10,-24)}];M.forEach((e=>{T.forEach((t=>{let n=new l({base:new i(e.base),baseUnit:e,prefix:t.prefix,multiplier:t.multiplier});m.add(n)}))})),m.forEach((e=>{o[e.name]=e,o[e.abbr]=e}));var _=Object.freeze({__proto__:null,unitsList:m,units:o,default:o,second:p,minute:h,hour:c,day:d,week:w,year:f,meter:g,gram:v,litre:y,bit:U,byte:x,siPrefixes:T});const B=[{base:new i({abbr:"ly",name:"lightyear"}),metricBase:g,multiplier:9460730472580800},{base:new i({abbr:"Ls",name:"light-second"}),metricBase:g,multiplier:299792458},{base:new i({abbr:"Lm",name:"light-minute"}),metricBase:g,multiplier:17987547480},{base:new i({abbr:"Lh",name:"light-hour"}),metricBase:g,multiplier:0xfb487b90a0},{base:new i({abbr:"Ld",name:"light-day"}),metricBase:g,multiplier:25902068371200},{base:new i({abbr:"Lw",name:"light-week"}),metricBase:g,multiplier:0xa4e79116e900},{base:new i({abbr:"au",name:"astronomical unit"}),metricBase:g,multiplier:149597870700},{base:new i({abbr:"pc",name:"parsec"}),metricBase:g,multiplier:0x6da012f95c9e88}],L=new Set,S={};B.forEach((e=>{const t=new l({base:e.base,baseUnit:e.metricBase,multiplier:e.multiplier});L.add(t),S[t.name]=t,S[t.abbr]=t}));var C=Object.freeze({__proto__:null,unitsList:L,units:S,default:S});const E=[{base:new i({abbr:"in",name:"inch"}),metricBase:g,multiplier:.0254},{base:new i({abbr:"h",name:"hand"}),metricBase:g,multiplier:.1016},{base:new i({abbr:"ft",name:"foot"}),metricBase:g,multiplier:.3048},{base:new i({abbr:"yd",name:"yard"}),metricBase:g,multiplier:.9144},{base:new i({abbr:"ch",name:"chain"}),metricBase:g,multiplier:20.1168},{base:new i({abbr:"fur",name:"furlong"}),metricBase:g,multiplier:201.168},{base:new i({abbr:"mi",name:"mile"}),metricBase:g,multiplier:1609.344},{base:new i({abbr:"lea",name:"league"}),metricBase:g,multiplier:4828.032},{base:new i({abbr:"fl oz",name:"fluid ounce"}),metricBase:o.ml,multiplier:28.4130625},{base:new i({abbr:"gi",name:"gill"}),metricBase:o.ml,multiplier:142.0653125},{base:new i({abbr:"pt",name:"pint"}),metricBase:o.ml,multiplier:568.26125},{base:new i({abbr:"qt",name:"quart"}),metricBase:o.ml,multiplier:1136.5225},{base:new i({abbr:"gal",name:"gallon"}),metricBase:o.ml,multiplier:4546.09},{base:new i({abbr:"cp",name:"cup"}),metricBase:o.ml,multiplier:240},{base:new i({abbr:"Tbsp",name:"tablespoon"}),metricBase:o.ml,multiplier:15},{base:new i({abbr:"tsp",name:"teaspoon"}),metricBase:o.ml,multiplier:5},{base:new i({abbr:"oz",name:"ounce"}),metricBase:v,multiplier:28.349523125},{base:new i({abbr:"lb",name:"pound"}),metricBase:v,multiplier:453.59237},{base:new i({abbr:"st",name:"stone"}),metricBase:v,multiplier:6350.29318},{base:new i({abbr:"t",name:"ton"}),metricBase:o.kg,multiplier:1016.0469088}],$=new Set,k={};E.forEach((e=>{const t=new l({base:e.base,baseUnit:e.metricBase,multiplier:e.multiplier});$.add(t),k[t.name]=t,k[t.abbr]=t}));const z=new b({units:[k.mi,o.h],abbr:"mph"});$.add(z),k[z.name]=z,k[z.abbr]=z;var j=Object.freeze({__proto__:null,unitsList:$,units:k,mph:z,default:k});const F=new Set,V={};[j,C,_].forEach((e=>{e.unitsList.forEach((e=>{F.add(e),V[e.name]=e,V[e.abbr]=e}))}));class O{constructor(e){this.unitsList=F,this.units=V,(null==e?void 0:e.length)&&(this.unitsList=new Set,this.units={},e.forEach((e=>{this.addUnit(e)})))}getUnit(e){if(V[e])return V[e];if(e.includes("/"))return this.getCompoundUnit(e.split("/"));throw new Error(`No units in this library instance matching key: ${e}`)}getCompoundUnit(e){let t=e.map((e=>this.getUnit(e)));return new b({units:t})}hasKey(e){try{return!!this.getUnit(e)}catch(e){return!1}}addUnit(e){return this.unitsList.add(e),this.units[e.name]=e,this.units[e.abbr]=e,this}deleteUnit(e){return this.unitsList.delete(e),delete this.units[e.name],delete this.units[e.abbr],this}}const P=new O;class I{constructor(e){var t;const i=null!==(t=e.library)&&void 0!==t?t:P;this.library=i,"string"==typeof e.unit?this.unit=i.getUnit(e.unit):this.unit=e.unit,this.value=e.value}static get(e,t,i){return new I({value:e,unit:t,library:i})}getValue(e,t=0){if(!e)return this.value;const i=this.unit;let n=this.getConvertedUnit(e,t);return r(this.value,s(i.multiplier,n.multiplier))}as(e,t=0){this.unit;let i=this.getConvertedUnit(e,t),n=this.getValue(e,t);return this.clone({unit:i,value:n})}to(e,t=0){let i=this.as(e,t);return this.value=i.value,this.unit=i.unit,this}per(e){let i,n=this.unit.clone(),a=this.getUnitFromLibrary(e);return i=n.unitType===t.Compound?n:new b({units:[n]}),i.addUnit(a),this.clone({value:this.value,unit:i})}getConvertedUnit(e,i=0){const n=this.unit;let a=this.getUnitFromLibrary(e);if(a&&n.unitType===t.Compound){a=n.convert(a,i)}if(!a.matchesType(n))throw new Error("Invalid Units: a unit of type `"+this.unit+"` cannot be converted to a unit of type `"+a+"`");return a}getUnitFromLibrary(e){let t;return t="string"==typeof e?this.library.getUnit(e):e,t}clone(e){var t,i,n;return new I({value:null!==(t=null==e?void 0:e.value)&&void 0!==t?t:this.value,unit:null!==(i=null==e?void 0:e.unit)&&void 0!==i?i:this.unit.clone(),library:null!==(n=null==e?void 0:e.library)&&void 0!==n?n:this.library})}toString(e=!0,t=!0){return e?`${this.value}${this.unit.toString(e)}`:t&&1!=this.value?`${this.value} ${this.unit.toString(e)}s`:`${this.value} ${this.unit.toString(e)}`}}var N=Object.freeze({__proto__:null,library:P,UnitLibrary:O,get UnitType(){return e},UnitBase:i,Unit:l,CompoundUnit:b,Scalar:I});window.measurement=N}();
