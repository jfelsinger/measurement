!function(){"use strict";var e;!function(e){e.Mass="Mass",e.Length="Length",e.Volume="Volume",e.Time="Time",e.Memory="Memory",e.Angle="Angle",e.Temperature="Temperature",e.Charge="Charge",e.Energy="Energy",e.Force="Force",e.Pressure="Pressure",e.Compound="Compound",e.Unknown="Unknown"}(e||(e={}));var t=e;class i{constructor(e){this.abbr=e.abbr,this.name=e.name}static get(e){return e instanceof i?e:new i(e)}toString(e=!1){return e||!this.name?this.abbr:this.name}}function n(...e){return Math.max(...e.map((e=>`${e}`)).filter((e=>e.includes("."))).map((e=>e.split(".")[1].length)))}function a(e){let t=1;return e>0&&(t=Math.pow(10,e)),t}function r(...e){let t=a(n(...e));return(e=e.map((e=>Math.round(e*t)))).slice(1).reduce(((e,t)=>e*t),e[0])/Math.pow(t,e.length)}function s(...e){return e.slice(1).reduce(((e,t)=>{let i=a(n(e,t));return(e=Math.round(e*i))/(t=Math.round(t*i))}),e[0])}class l{constructor(t){var n,a;this.aliases=[],this.base=i.get(t.base||(null===(n=t.baseUnit)||void 0===n?void 0:n.base)),t.aliases&&(this.aliases=t.aliases),this.baseUnit=t.baseUnit,this.unitType=t.unitType||(null===(a=t.baseUnit)||void 0===a?void 0:a.unitType)||e.Unknown,t.prefix&&(this.prefix=i.get(t.prefix)),this.baseMultiplier=isNaN(t.multiplier)?1:parseFloat(`${t.multiplier}`),this.__name=t.name}get abbr(){return this.toString()}get name(){return this.__name||this.toString(!1)}get multiplier(){var e,t;const i=null!==(t=null===(e=this.baseUnit)||void 0===e?void 0:e.multiplier)&&void 0!==t?t:1;return r(this.baseMultiplier,i)}toString(e=!0){var t,i,n,a;return e?(null!==(i=null===(t=null==this?void 0:this.prefix)||void 0===t?void 0:t.abbr)&&void 0!==i?i:"")+this.base.abbr:(null!==(a=null===(n=null==this?void 0:this.prefix)||void 0===n?void 0:n.name)&&void 0!==a?a:"")+this.base.name}matchesType(e){return this.unitType===e.unitType}clone(e){let t={base:this.base,baseUnit:this.baseUnit,prefix:this.prefix,unitType:this.unitType,multiplier:this.baseMultiplier,name:this.__name,aliases:this.aliases.slice()};return(null==e?void 0:e.base)&&(t.base=new i(e.base)),(null==e?void 0:e.baseUnit)&&(t.baseUnit=e.baseUnit),(null==e?void 0:e.prefix)&&(t.prefix=new i(e.prefix)),(null==e?void 0:e.unitType)&&(t.unitType=e.unitType),(null==e?void 0:e.multiplier)&&(t.multiplier=e.multiplier),(null==e?void 0:e.name)&&(t.name=e.name),(null==e?void 0:e.aliases)&&(t.aliases=e.aliases),new l(t)}}function u(t){if(t.unitType!==e.Compound)return`${t.unitType}`;const i=t.subUnits.map((e=>u(e))).join(".");return`${t.unitType}:${i}`}class b{constructor(e){this.subUnits=[],this.isInverse=!1,this.aliases=[],this.subUnits=e.units||[],this.__name=e.name,this.__abbr=e.abbr,e.aliases&&(this.aliases=e.aliases)}get unitType(){return t.Compound}get multiplier(){return function(e,t=!1){let i=1;if(e.length){let n=e.map((e=>e.multiplier));i=t?r(...n):s(...n)}return i}(this.subUnits)}addUnit(e,t=!1){return t?this.subUnits.unshift(e):this.subUnits.push(e),this}convert(e,t=0){if(this.matchesType(e))return e;let i=this.subUnits.slice(0);if(!e.matchesType(i[t]))throw new Error("Invalid Units: a unit of type `"+u(i[t])+"` cannot be converted to a unit of type `"+u(e)+"`");return i[t]=e,new b({units:i})}matchesType(e){if(e.unitType!==t.Compound)return!1;return e.subUnits.every(((e,t)=>this.subUnits[t]&&this.subUnits[t].matchesType(e)))}get abbr(){var e;return null!==(e=this.__abbr)&&void 0!==e?e:this.toString()}get name(){return this.__name||this.toString(!1)}clone(e){let t={units:this.subUnits,name:this.__name,aliases:this.aliases};return(null==e?void 0:e.units)&&(t.units=e.units),(null==e?void 0:e.name)&&(t.name=e.name),(null==e?void 0:e.aliases)&&(t.aliases=e.aliases),new b(t)}toString(e=!0){return e&&this.__abbr?this.__abbr:this.subUnits.map((t=>t.toString(e))).join(e?"/":" per ")}}const o=new Set,m={},h=new l({base:new i({abbr:"s",name:"second"}),unitType:e.Time});o.add(h);const p=new l({base:new i({abbr:"min",name:"minute"}),baseUnit:h,multiplier:60});o.add(p);const c=new l({base:new i({abbr:"h",name:"hour"}),baseUnit:p,multiplier:60});c.aliases.push("hr"),o.add(c);const d=new l({base:new i({abbr:"d",name:"day"}),baseUnit:c,multiplier:24});o.add(d);const w=new l({base:new i({abbr:"W",name:"week"}),baseUnit:d,multiplier:7});o.add(d);const v=new l({base:new i({abbr:"yr",name:"year"}),baseUnit:d,multiplier:365.25});v.aliases.push("y"),o.add(v);const f=new l({base:new i({abbr:"m",name:"meter"}),unitType:e.Length});o.add(f);const g=new l({base:new i({abbr:"g",name:"gram"}),unitType:e.Mass});o.add(g);const y=new l({base:new i({abbr:"l",name:"litre"}),unitType:e.Volume});o.add(y);const U=new l({base:new i({abbr:"b",name:"bit"}),unitType:e.Length});o.add(U);const _=new l({base:new i({abbr:"B",name:"byte"}),baseUnit:U,multiplier:8});o.add(_);const x=[h,f,g,y,U,_],T=[{prefix:{abbr:"Y",name:"yotta"},multiplier:Math.pow(10,24)},{prefix:{abbr:"Z",name:"zetta"},multiplier:Math.pow(10,21)},{prefix:{abbr:"E",name:"exa"},multiplier:Math.pow(10,18)},{prefix:{abbr:"P",name:"peta"},multiplier:Math.pow(10,15)},{prefix:{abbr:"T",name:"tera"},multiplier:Math.pow(10,12)},{prefix:{abbr:"G",name:"giga"},multiplier:Math.pow(10,9)},{prefix:{abbr:"M",name:"mega"},multiplier:Math.pow(10,6)},{prefix:{abbr:"k",name:"kilo"},multiplier:Math.pow(10,3)},{prefix:{abbr:"h",name:"hecto"},multiplier:Math.pow(10,2)},{prefix:{abbr:"da",name:"deca"},multiplier:Math.pow(10,1)},{prefix:{abbr:"d",name:"deci"},multiplier:Math.pow(10,-1)},{prefix:{abbr:"c",name:"centi"},multiplier:Math.pow(10,-2)},{prefix:{abbr:"m",name:"milli"},multiplier:Math.pow(10,-3)},{prefix:{abbr:"u",name:"micro"},multiplier:Math.pow(10,-6)},{prefix:{abbr:"Î¼",name:"micro"},multiplier:Math.pow(10,-6)},{prefix:{abbr:"n",name:"nano"},multiplier:Math.pow(10,-9)},{prefix:{abbr:"p",name:"pico"},multiplier:Math.pow(10,-12)},{prefix:{abbr:"f",name:"femto"},multiplier:Math.pow(10,-15)},{prefix:{abbr:"a",name:"atto"},multiplier:Math.pow(10,-18)},{prefix:{abbr:"z",name:"zepto"},multiplier:Math.pow(10,-21)},{prefix:{abbr:"y",name:"yocto"},multiplier:Math.pow(10,-24)}];x.forEach((e=>{T.forEach((t=>{let n=new l({base:new i(e.base),baseUnit:e,prefix:t.prefix,multiplier:t.multiplier});o.add(n)}))})),o.forEach((e=>{var t;m[e.name]=e,m[e.abbr]=e,null===(t=e.aliases)||void 0===t||t.forEach((t=>{m[t]=e}))}));var M=Object.freeze({__proto__:null,unitsList:o,units:m,default:m,second:h,minute:p,hour:c,day:d,week:w,year:v,meter:f,gram:g,litre:y,bit:U,byte:_,siPrefixes:T});const L=[{base:new i({abbr:"ly",name:"lightyear"}),metricBase:f,multiplier:9460730472580800},{base:new i({abbr:"Ls",name:"light-second"}),metricBase:f,multiplier:299792458},{base:new i({abbr:"Lm",name:"light-minute"}),metricBase:f,multiplier:17987547480},{base:new i({abbr:"Lh",name:"light-hour"}),metricBase:f,multiplier:0xfb487b90a0},{base:new i({abbr:"Ld",name:"light-day"}),metricBase:f,multiplier:25902068371200},{base:new i({abbr:"Lw",name:"light-week"}),metricBase:f,multiplier:0xa4e79116e900},{base:new i({abbr:"au",name:"astronomical unit"}),metricBase:f,multiplier:149597870700},{base:new i({abbr:"pc",name:"parsec"}),metricBase:f,multiplier:0x6da012f95c9e88}],S=new Set,E={};L.forEach((e=>{const t=new l({base:e.base,baseUnit:e.metricBase,multiplier:e.multiplier});S.add(t),E[t.name]=t,E[t.abbr]=t}));var k=Object.freeze({__proto__:null,unitsList:S,units:E,default:E});const C=[{base:new i({abbr:"in",name:"inch"}),baseUnit:f,multiplier:.0254},{base:new i({abbr:"h",name:"hand"}),baseUnit:f,multiplier:.1016},{base:new i({abbr:"ft",name:"foot"}),aliases:["feet"],baseUnit:f,multiplier:.3048},{base:new i({abbr:"yd",name:"yard"}),baseUnit:f,multiplier:.9144},{base:new i({abbr:"ch",name:"chain"}),baseUnit:f,multiplier:20.1168},{base:new i({abbr:"fur",name:"furlong"}),baseUnit:f,multiplier:201.168},{base:new i({abbr:"mi",name:"mile"}),baseUnit:f,multiplier:1609.344},{base:new i({abbr:"lea",name:"league"}),baseUnit:f,multiplier:4828.032},{base:new i({abbr:"fl oz",name:"fluid ounce"}),baseUnit:m.ml,multiplier:28.4130625},{base:new i({abbr:"gi",name:"gill"}),baseUnit:m.ml,multiplier:142.0653125},{base:new i({abbr:"pt",name:"pint"}),baseUnit:m.ml,multiplier:568.26125},{base:new i({abbr:"qt",name:"quart"}),baseUnit:m.ml,multiplier:1136.5225},{base:new i({abbr:"gal",name:"gallon"}),baseUnit:m.ml,multiplier:4546.09},{base:new i({abbr:"cp",name:"cup"}),baseUnit:m.ml,multiplier:240},{base:new i({abbr:"Tbsp",name:"tablespoon"}),baseUnit:m.ml,multiplier:15},{base:new i({abbr:"tsp",name:"teaspoon"}),baseUnit:m.ml,multiplier:5},{base:new i({abbr:"oz",name:"ounce"}),baseUnit:g,multiplier:28.349523125},{base:new i({abbr:"lb",name:"pound"}),baseUnit:g,multiplier:453.59237},{base:new i({abbr:"st",name:"stone"}),baseUnit:g,multiplier:6350.29318},{base:new i({abbr:"t",name:"ton"}),baseUnit:m.kg,multiplier:1016.0469088}],$=new Set,B={};C.forEach((e=>{const t=new l(e);$.add(t),B[t.name]=t,B[t.abbr]=t}));const z=new b({units:[B.mi,m.h],abbr:"mph"});$.add(z),B[z.name]=z,B[z.abbr]=z;var j=Object.freeze({__proto__:null,unitsList:$,units:B,mph:z,default:B});const F=new Set,O={};[j,k,M].forEach((e=>{e.unitsList.forEach((e=>{var t;F.add(e),O[e.name]=e,O[e.abbr]=e,null===(t=e.aliases)||void 0===t||t.forEach((t=>{O[t]=e}))})),Object.keys(e.units).forEach((t=>{O[t]=e.units[t]}))}));class P{constructor(e){this.unitsList=F,this.units=O,(null==e?void 0:e.length)&&(this.unitsList=new Set,this.units={},e.forEach((e=>{this.addUnit(e)})))}getUnit(e){if(O[e])return O[e];if(e.includes("/"))return this.getCompoundUnit(e.split("/"));throw new Error(`No units in this library instance matching key: ${e}`)}getCompoundUnit(e){let t=e.map((e=>this.getUnit(e)));return new b({units:t})}hasKey(e){try{return!!this.getUnit(e)}catch(e){return!1}}addUnit(e){var t;return this.unitsList.add(e),this.units[e.name]=e,this.units[e.abbr]=e,null===(t=e.aliases)||void 0===t||t.forEach((t=>this.units[t]=e)),this}deleteUnit(e){return this.unitsList.delete(e),delete this.units[e.name],delete this.units[e.abbr],this}clone(){return new P(Array.from(this.unitsList))}}const V=new P;class A{constructor(e){var t;const i=null!==(t=e.library)&&void 0!==t?t:V;this.library=i,"string"==typeof e.unit?this.unit=i.getUnit(e.unit):this.unit=e.unit,this.__value=e.value;const n=this.as=this.convertAs.bind(this);this.to=this.convertTo.bind(this);const a=this.per=this.convertPer.bind(this);this.library.unitsList.forEach((e=>{this.as[e.name]=t=>n(e,t),this.to[e.name]=t=>this.to(e,t),this.per[e.name]=()=>a(e)}))}get value(){return this.getValue()}static get(e,t,i){return new A({value:e,unit:t,library:i})}getValue(e,t=0){if(!e)return this.__value;const i=this.unit;let n=this.getConvertedUnit(e,t);return r(this.__value,s(i.multiplier,n.multiplier))}convertAs(e,t=0){let i=this.getConvertedUnit(e,t),n=this.getValue(e,t);return this.clone({unit:i,value:n})}convertTo(e,t=0){let i=this.as(e,t);return this.__value=i.value,this.unit=i.unit,this}convertPer(e){let i,n=this.unit.clone();this.unit;let a=this.getUnitFromLibrary(e);return i=n.unitType===t.Compound?n:new b({units:[n]}),i.addUnit(a),this.clone({value:this.__value,unit:i})}getConvertedUnit(e,i=0){const n=this.unit;let a=this.getUnitFromLibrary(e);if(a&&n.unitType===t.Compound){a=n.convert(a,i)}if(!a.matchesType(n))throw new Error("Invalid Units: a unit of type `"+this.unit.toString(!1)+"` cannot be converted to a unit of type `"+a.toString(!1)+"`");return a}getUnitFromLibrary(e){let t;return t="string"==typeof e?this.library.getUnit(e):e,t}clone(e){var t,i,n;return new A({value:null!==(t=null==e?void 0:e.value)&&void 0!==t?t:this.__value,unit:null!==(i=null==e?void 0:e.unit)&&void 0!==i?i:this.unit.clone(),library:null!==(n=null==e?void 0:e.library)&&void 0!==n?n:this.library})}toString(e=!0,t=!0){return e?`${this.value}${this.unit.toString(e)}`:t&&1!=this.__value?`${this.value} ${this.unit.toString(e)}s`:`${this.value} ${this.unit.toString(e)}`}}const I=/^(?<value>[-+]?[0-9.]*)\s*(?<unit>.*)$/gi;class N{constructor(e=V){this.library=V,this.units={},e&&this.registerLibrary(e)}get unit(){return this.units}measurement(...e){return this.measure(...e)}measure(...e){if(1===e.length)return this.parseUnit(e[0]);if(e[0],!e[1])throw new Error("The unit argument provided is null or invalid");return this.makeScalar(e[1])(e[0])}parseUnit(e){var t,i;e=e.trim();let n=I.exec(e),a=null,r=null;if((null==n?void 0:n.groups)&&((null===(t=null==n?void 0:n.groups)||void 0===t?void 0:t.unit)&&this.library.hasKey(n.groups.unit)&&(a=this.library.getUnit(n.groups.unit)),(null===(i=null==n?void 0:n.groups)||void 0===i?void 0:i.value)&&(r=parseFloat(n.groups.value))),null===a||!r)throw new Error("Unable to parse the given unit string: `"+e+"`");return this.makeScalar(a)(r)}makeScalar(e){let t=this.library;return i=>new A({unit:e,value:i,library:t})}registerLibrary(e){this.library=e,e.unitsList.forEach((e=>this.addUnit(e)))}addUnit(e){this.library.addUnit(e);let t=this;return t[e.name]||(t[e.name]=this.makeScalar(e)),t[e.abbr]||(t[e.abbr]=this.makeScalar(e)),this.units[e.name]=e,this.units[e.abbr]=e,this}deleteUnit(e){var t,i;this.library.deleteUnit(e);let n=this;return(null===(t=n[e.name])||void 0===t?void 0:t.name)===e.name&&delete n[e.name],(null===(i=n[e.abbr])||void 0===i?void 0:i.name)===e.name&&delete n[e.abbr],delete this.units[e.name],delete this.units[e.abbr],this}}const q=new N;var K=Object.freeze({__proto__:null,library:V,UnitLibrary:P,get UnitType(){return e},UnitBase:i,Unit:l,CompoundUnit:b,Scalar:A,measurementRegex:I,Measurement:N,MeasurementFactory:function(e=V){return new N(e)},measurement:q});window.measurement=q,Object.keys(K).forEach((e=>{window.measurement[e]=K[e]}))}();
